<templates>
    <t t-name="yousentech_sale_reports.dy_report_re_profit_mrg_temp1" owl="1">
        <head>
            <link href="/yousentech_sale_reports/static/src/css/dynamic_report_style.css" rel="stylesheet" />
        </head>
        <center class="vh-100 overflow-auto bg-muted">
            <div class="m-3 vw-100 overflow-auto">
                <div class="row">
                        <h2  class="text-primary fw-bold">Sales Profit Margin Report</h2>
                        
                      
                        
                </div>
                <div class="head row" style="width:98%;">
                        <div class='col m-1' >
                            <label class="m-1" for="from_date">Partner<select class="form-select" t-model="state.select_partner_id">
                                <t t-foreach="options" t-as="option" t-key="option.id">
                                    <option t-att-value="option.id" ><t t-esc="option.name"/></option>
                                </t>
                                        </select>    
                                </label>
                                <label class="m-1" for="from_date">Salesman<select class="form-select" t-model="state.select_saleman_id">
                                    <t t-foreach="salesman" t-as="option" t-key="option.id">
                                        <option t-att-value="option.id" ><t t-esc="option.name"/></option>
                                    </t>
                                            </select>    
                                    </label>
                                <label class="m-1" for="from_date">Analytical Account<select class="form-select" t-model="state.select_analysis_acc_id">
                                    <t t-foreach="analysis" t-as="option" t-key="option.id">
                                        <option t-att-value="option.id"  ><t t-esc="option.name"   /></option>
                                    </t>
                                            </select>    
                                </label>
                                <label class="m-1" for="from_date">Journals<select class="form-select" t-model="state.selcect_journal_id">
                                    <t t-foreach="journals" t-as="option" t-key="option.id">
                                        <option t-att-value="option.id"  ><t t-esc="option.name"   /></option>
                                    </t>
                                            </select>    
                                    </label>

                                
                            <label class="m-1" for="from_date">From Date 
                                <br/><input class="m-1" type="date" t-model="state.from_date" t-att-value="state.from_date" />
                            </label>
                            <label class="m-1" for="to_date">To Date 
                                <br/><input class="m-1" type="date" t-model="state.to_date"  t-att-value="state.to_date"  /> 
                            </label>
                            <label class="m-1" for="my_checkbox" >Hide Canceled Sales
                                <br/><input class="m-1" type="checkbox" name="my_checkbox" t-model="state.hide_payment_cancel"  t-att-value="state.hide_payment_cancel"  id="my_checkbox"/>
                            </label>
                           
                        <button t-on-click="updateData_after" class="apply-btn btn btn-primary" >Apply</button>

                    </div>
                </div>

                
                <!-- <div class="row">
                        <h4  class="text-primary fw-bold" ><t t-esc=" state.show_name_analysis"/> </h4>
                </div>
                <div class="row">
                    <h4  class="text-primary fw-bold" ><t t-esc=" state.show_name_categ"/> </h4>
            </div> -->
              
                <table class="mytable"> 
                   
                    <tr>
                        <th>Date </th>
                        <t t-if="state.show_product">
                         <th>Product </th>
                        </t>
                        <th>Inv No. </th>
                        <th>Inv Type</th>
                        <th>Partner</th>
                        <th>Net Sales</th>
                        <th>Cost of Sales</th>
                        <th> Profit</th>
                        <t t-if="state.show_product">
                            <th>Total Quantity</th>
                         </t>
                        
                        
                    </tr>
                    <tbody >
                        
                        <tr class='bold-line'>
                            <td >
                                <span class="m-1">
                                    Total
                                </span>
                                </td>
                                <t t-if="state.show_product">
                                    <td>_</td>
                                </t>
                                <td>_</td>
                                <td>_</td>
                                <td>_</td>
                                <td><t t-esc="state.Data.sum_amount_untaxed"/></td>
                                <td><t t-esc="state.Data.sum_prodect_cost"/></td>
                                <td><t t-esc="state.Data.sum_amount_profit"/></td>
                                <t t-if="state.show_product">
                                    <td><t t-esc="state.Data.sum_quantity"/></td>
                                </t>
                        </tr>
                        <t t-foreach="state.Data.data" t-as="item" t-key="item.id_l" >
                            <tr  data-bs-toggle="collapse" t-att-data-account-id="item.id_l" t-attf-data-bs-target=".a{{item.id}}">
                                <td>
                                    <div class="dropdown dropdown-toggle">
                                        <a data-bs-toggle="dropdown" href="#">
                                            <span>
                                                <t t-esc="item.date" />
                                            </span>
                                        </a>
                                        <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu">
                                            <li >
                                                <a class="view-detail"  t-on-click="_onClickViewDetail"  tabindex="-1" href="#" t-att-data-detail-id="item.id"  >
                                                    View Source move
                                                </a>
                                         
                                            </li>
                                        </ul>
                                    </div>
                                </td>
                               
                                <t t-if="state.show_product">
                                    <td><t t-esc="item.prodect_name"/></td>
                                </t>
                                
                                <td><t t-esc="item.name"/></td>
                                <td><t t-esc="item.move_type"/></td>
                                <td><t t-esc="item.partner_name"/></td>
                                <td><t t-esc="item.amount_untaxed"/></td>
                                <td><t t-esc="item.prodect_cost"/></td>
                                <td><t t-esc="item.amount_profit"/></td>
                                <t t-if="state.show_product">
                                    <td><t t-esc="item.quantity"/></td>
                                 </t>
                                
                            </tr>
                        </t>
                    </tbody>
              </table>  
              <br/>
<br/>
<br/>
        </div>
        </center>
        </t>
</templates>
